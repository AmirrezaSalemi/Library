<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Librarian Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/librarian_home.css') }}">
</head>
<body>
    <header>
        <div class="title">
            <img src="{{ url_for('static', filename='images/Logo.png') }}" alt="Library Logo" id="library-logo">
        </div>
    </header>
    <div class="content-wrapper">
        <h2>Welcome, {{first_name}} {{last_name}} as Librarian!</h2>
        <div class="rectangle-container">
            <a href="#" class="rectangle add-librarian-btn" onclick="openLibrarianForm()">Add Librarian</a>
            <a href="#" class="rectangle" onclick="openUserForm()">Add User</a>
            <a href="#" class="rectangle" onclick="openBookForm()">Add Book</a>
            <a href="#" class="rectangle" onclick="openAuthorForm()">Add Author</a>
            <a href="#" class="rectangle" onclick="openUserList()">List of Users</a>
            <a href="#" class="rectangle" onclick="openBookList()">List of Books</a>
            <a href="#" class="rectangle" onclick="openAuthorList()">List of Authors</a>
            <a href="#" class="rectangle" onclick="openBorrowList()">List of Borrows</a>
        </div>
    </div>
    <div class="overlay" id="overlay"></div>
    <div class="form-container" id="librarianFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeLibrarianForm()">x</span>
        <h3>Add Librarian</h3>
        <form id="librarianForm">
            <label for="librarianID">Librarian ID:</label>
            <input type="text" id="librarianID" name="librarianID" autocomplete="off" required>
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" autocomplete="off" required>
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" autocomplete="off" required>
            <button type="button" onclick="submitLibrarianForm()">Add Librarian</button>
        </form>
    </div>
    <div class="form-container" id="userFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeUserForm()">x</span>
        <h3>Add User</h3>
        <form id="userForm">
            <label for="userID">User ID:</label>
            <input type="text" id="userID" name="userID" autocomplete="off" required>
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" autocomplete="off" required>
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" autocomplete="off" required>
            <label for="city">City:</label>
            <input type="text" id="city" name="city" autocomplete="off" required>
            <label for="street">Street:</label>
            <input type="text" id="street" name="street" autocomplete="off">
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" autocomplete="off" required>
            <button type="button" onclick="submitUserForm()">Add User</button>
        </form>
    </div>
    <div class="form-container" id="bookFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeBookForm()">x</span>
        <h3>Add Book</h3>
        <form id="bookForm" enctype="multipart/form-data">
            <label for="bookName">Book Name:</label>
            <input type="text" id="bookName" name="bookName" autocomplete="off" required>
            <label for="ISBN">ISBN:</label>
            <input type="text" id="ISBN" name="ISBN" autocomplete="off" required>
            <label for="genre">Genre:</label>
            <input type="text" id="genre" name="genre" autocomplete="off" required>
            <label for="publicationYear">Publication Year:</label>
            <input type="number" id="publicationYear" name="publicationYear" autocomplete="off" required>
            <label for="bookImage">Book Image:</label>
            <input type="file" id="bookImage" name="bookImage" accept="image/*">
            <div id="authorsContainer">
                <div class="author-fields">
                    <label for="authorSelect">Author:</label>
                    <select id="authorSelect" name="authorID[]" required>
                    </select>
                </div>
            </div>
            <button type="button" onclick="addAuthorField()">Add Another Author</button>
            <button type="button" onclick="submitBookForm()">Add Book</button>
        </form>
    </div>
    <div class="form-container" id="authorFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeAuthorForm()">x</span>
        <h3>Add Author</h3>
        <form id="authorForm" enctype="multipart/form-data">
            <label for="authorID">Author ID:</label>
            <input type="text" id="authorID" name="authorID" autocomplete="off" required>
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" autocomplete="off" required>
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" autocomplete="off" required>
            <label for="authorImage">Author Image:</label>
            <input type="file" id="authorImage" name="authorImage" accept="image/*">
            <button type="button" onclick="submitAuthorForm()">Add Author</button>
        </form>
    </div>
    <div class="form-container" id="editUserFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeEditUserForm()">x</span>
        <h3>Edit User</h3>
        <form id="editUserForm">
            <label for="editUserID">User ID:</label>
            <input type="text" id="editUserID" name="userID" readonly required>
            <label for="editFirstName">First Name:</label>
            <input type="text" id="editFirstName" name="firstName" autocomplete="off" required>
            <label for="editLastName">Last Name:</label>
            <input type="text" id="editLastName" name="lastName" autocomplete="off" required>
            <label for="editCity">City:</label>
            <input type="text" id="editCity" name="city" autocomplete="off">
            <label for="editStreet">Street:</label>
            <input type="text" id="editStreet" name="street" autocomplete="off">
            <label for="editAge">Age:</label>
            <input type="number" id="editAge" name="age" autocomplete="off">
            <button type="button" onclick="submitEditUserForm()">Save Changes</button>
        </form>
    </div>
    <div class="form-container" id="editBookFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeEditBookForm()">x</span>
        <h3>Edit Book</h3>
        <form id="editBookForm" enctype="multipart/form-data">
            <label for="editISBN">ISBN:</label>
            <input type="text" id="editISBN" name="ISBN" readonly required>
            <label for="editBookName">Book Name:</indigo-style-italicized:</label>
            <input type="text" id="editBookName" name="bookName" autocomplete="off" required>
            <label for="editGenre">Genre:</label>
            <input type="text" id="editGenre" name="genre" autocomplete="off" required>
            <label for="editPublicationYear">Publication Year:</label>
            <input type="number" id="editPublicationYear" name="publicationYear" autocomplete="off" required>
            <label for="editBookImage">Book Image:</label>
            <input type="file" id="editBookImage" name="bookImage" accept="image/*">
            <h4>Authors</h4>
            <div id="editAuthorsContainer">
            </div>
            <button type="button" onclick="addEditAuthorField()">Add Another Author</button>
            <button type="button" onclick="submitEditBookForm()">Save Changes</button>
        </form>
    </div>
    <div class="form-container" id="editAuthorFormContainer" style="display: none;">
        <span class="close-btn" onclick="closeEditAuthorForm()">x</span>
        <h3>Edit Author</h3>
        <form id="editAuthorForm" enctype="multipart/form-data">
            <label for="editAuthorID">Author ID:</label>
            <input type="text" id="editAuthorID" name="authorID" readonly required>
            <label for="editFirstNameAuthor">First Name:</label>
            <input type="text" id="editFirstNameAuthor" name="first_name" autocomplete="off" required>
            <label for="editLastNameAuthor">Last Name:</label>
            <input type="text" id="editLastNameAuthor" name="last_name" autocomplete="off" required>
            <label for="editAuthorImage">Author Image:</label>
            <input type="file" id="editAuthorImage" name="authorImage" accept="image/*">
            <button type="button" onclick="submitEditAuthorForm()">Save Changes</button>
        </form>
    </div>
    <div class="frame" id="userListFrame" style="display: none;">
        <span class="close-btn" onclick="closeUserList()">x</span>
        <div class="frame-content">
            <h2>List of Users</h2>
            <table id="userTable">
                <thead>
                    <tr>
                        <th>UserID</th>
                        <th>User Name</th>
                        <th>Add By Librarian</th>
                        <th>LibrarianID</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="frame" id="bookListFrame" style="display: none;">
        <span class="close-btn" onclick="closeBookList()">x</span>
        <div class="frame-content">
            <h2>List of Books</h2>
            <div id="bookListContainer" class="book-list-container">
                <!-- Book items will be dynamically added here -->
            </div>
        </div>
    </div>
    <div class="frame" id="authorListFrame" style="display: none;">
        <span class="close-btn" onclick="closeAuthorList()">x</span>
        <div class="frame-content">
            <h2>List of Authors</h2>
            <table id="authorTable">
                <thead>
                    <tr>
                        <th>AuthorID</th>
                        <th>Author Name</th>
                        <th>Image</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="frame" id="borrowListFrame" style="display: none;">
        <span class="close-btn" onclick="closeBorrowList()">x</span>
        <div class="frame-content">
            <h2>List of Borrows</h2>
            <table id="borrowTable">
                <thead>
                    <tr>
                        <th>Borrow ID</th>
                        <th>User ID</th>
                        <th>User Name</th>
                        <th>Book Name</th>
                        <th>ISBN</th>
                        <th>Borrow Date</th>
                        <th>Return Date</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="frame" id="deleteConfirmationFrame" style="display: none;">
        <span class="close-btn" onclick="closeDeleteConfirmation()">x</span>
        <div class="frame-content">
            <h2>Confirm Deletion</h2>
            <p>Are you sure you want to delete this item?</p>
            <button onclick="confirmDelete()">Accept</button>
            <button onclick="denyDelete()">Deny</button>
        </div>
    </div>
    <div id="notification" class="notification" style="display: none;">
        <span class="icon" id="notification-icon"></span>
        <span id="notification-message"></span>
    </div>
    <input type="hidden" id="currentLibrarianID" value="{{ librarian_id }}">
    <script src="{{ url_for('static', filename='js/librarian_script.js') }}"></script>
</body>
</html>
